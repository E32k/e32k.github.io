<aside id="sidebar">
  <ul class="tree">
    {% assign pages = site.pages | sort: "url" %}

    {% for page in pages %}
      {% if page.title and page.url endswith "/" %}
        <li class="node folder">
          <details>
            <summary>
              <a href="{{ page.url }}">{{ page.title }}</a>
            </summary>

            <ul>
              {% for subpage in pages %}
                {% if subpage.title %}
                  {% if subpage.url startswith page.url %}
                    {% if subpage.url != page.url and subpage.url endswith ".html" %}
                      <li class="node file">
                        <a href="{{ subpage.url }}">{{ subpage.title }}</a>
                      </li>
                    {% endif %}
                  {% endif %}
                {% endif %}
              {% endfor %}
            </ul>

          </details>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</aside>
