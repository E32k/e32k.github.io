<aside>
  {% assign folders = site.static_files | map: "path" | uniq %}
  {% assign dirs = "" | split: "" %}
  
  {% for f in folders %}
    {% assign folder = f | split: "/" | slice: 0 %}
    {% if folder != "" and dirs contains folder == false %}
      {% assign dirs = dirs | push: folder %}
    {% endif %}
  {% endfor %}

  {% for dir in dirs %}
    {% assign index_file = dir | append: "/index.md" %}
    {% assign has_index = site.static_files | where: "path", index_file %}
    
    <details>
      <summary>
        {% if has_index.size > 0 %}
          <a href="{{ dir }}/">{{ dir }}</a>
        {% else %}
          {{ dir }}
        {% endif %}
      </summary>
    </details>
  {% endfor %}
</aside>
