<aside id="sidebar">
  <ul class="tree">
    {% assign pages = site.pages | sort: "url" %}

    {% for page in pages %}
      {% if page.title %}
        {% assign url_parts = page.url | split: "/" %}
        {% assign filename = url_parts | last %}
        {% assign depth = url_parts.size | minus: 3 %}

        {% if filename == "" or filename == "index.html" %}
          <!-- Folder with index.md -->
          <li class="node folder depth-{{ depth }}">
            <a href="{{ page.url }}">{{ page.title }}</a>
          </li>
        {% else %}
          <!-- Regular file -->
          <li class="node file depth-{{ depth }}">
            <a href="{{ page.url }}">{{ page.title }}</a>
          </li>
        {% endif %}
      {% endif %}
    {% endfor %}
  </ul>
</aside>
