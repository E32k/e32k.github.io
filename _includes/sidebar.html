<aside>
<!-- Filter all pages that start with /beamng/ -->
{% assign beamng_pages = site.pages | where_exp:"p","p.path contains '/beamng/'" %}

<!-- Initialize empty tree -->
{% assign tree = {} %}

<!-- Build nested folder/file tree -->
{% for page in beamng_pages %}
  {% assign parts = page.path | remove_first: "/" | split: "/" %}
  {% assign current = tree %}
  {% for part in parts %}
    {% if forloop.last %}
      {% assign current = current | merge: {{ part }}: page %}
    {% else %}
      {% unless current[part] %}
        {% assign current = current | merge: {{ part }}: {} %}
      {% endunless %}
      {% assign current = current[part] %}
    {% endif %}
  {% endfor %}
{% endfor %}

<!-- Render the tree recursively -->
{% include sidebar_node.html node=tree path="" %}
</aside>
